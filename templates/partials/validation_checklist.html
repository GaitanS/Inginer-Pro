<!-- HTMX Partial: Validation Checklist Table -->
<div id="checklist-content">
    {% for category in categories %}
    <div class="mb-6">
        <h3 class="text-base font-bold text-white mb-3 flex items-center gap-2">
            <span
                class="w-6 h-6 rounded bg-preh-petrol text-white flex items-center justify-center text-xs font-bold">{{ forloop.counter }}</span>
            {{ category.title }}
        </h3>

        <div class="overflow-x-auto rounded-lg border border-gray-700">
            <table class="w-full text-sm">
                <thead class="bg-gray-800 text-gray-400 text-xs uppercase">
                    <tr>
                        <th class="px-4 py-3 text-left w-24">IATF / VDA</th>
                        <th class="px-4 py-3 text-left">Test</th>
                        <th class="px-4 py-3 text-left">Expected Result</th>
                        <th class="px-4 py-3 text-left w-32">Example</th>
                        <th class="px-4 py-3 text-center w-36">Status</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-700">
                    {% for item in category.items.all %}
                    <tr class="hover:bg-gray-800/50 transition-colors">
                        <td class="px-4 py-3 align-top border-r border-gray-700 font-mono text-xs text-gray-500">
                            <div class="mb-1">IATF: <span class="text-gray-200 font-bold">{{ item.ref_iatf }}</span>
                            </div>
                            <div>VDA: <span class="text-gray-200 font-bold">{{ item.ref_vda }}</span></div>
                        </td>
                        <td class="px-4 py-3 align-top text-gray-300">{{ item.test }}</td>
                        <td class="px-4 py-3 align-top text-gray-300">{{ item.expected }}</td>
                        <td class="px-4 py-3 align-top text-gray-400 text-xs italic">{{ item.example }}</td>
                        <td class="px-4 py-3 align-middle text-center">
                            {% with status=results|get_item:item.id %}
                            {% include 'partials/validation_buttons.html' with item=item equipment=selected_equipment
                            status=status %}
                            {% endwith %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endfor %}
</div>