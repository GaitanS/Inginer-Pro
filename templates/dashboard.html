{% extends 'base.html' %}

{% block content %}
<!-- ApexCharts -->
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<div class="animate-fade-in space-y-6">

    <!-- Stats Row -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <!-- OEE -->
        <div
            class="bg-gray-700 border border-gray-600 rounded-xl p-5 shadow-lg relative overflow-hidden group hover:border-preh-petrol transition-colors">
            <div class="flex items-center space-x-4">
                <div class="p-3 bg-blue-500/10 rounded-full text-blue-400">
                    <i data-lucide="activity" class="w-6 h-6"></i>
                </div>
                <div>
                    <p class="text-xs text-gray-400 font-medium uppercase tracking-wider">OEE</p>
                    <h3 class="text-2xl font-bold text-white">87.5%</h3>
                </div>
            </div>
        </div>

        <!-- Defect Rate -->
        <div
            class="bg-gray-700 border border-gray-600 rounded-xl p-5 shadow-lg relative overflow-hidden group hover:border-red-500 transition-colors">
            <div class="flex items-center space-x-4">
                <div class="p-3 bg-red-500/10 rounded-full text-red-500">
                    <i data-lucide="alert-triangle" class="w-6 h-6"></i>
                </div>
                <div>
                    <p class="text-xs text-gray-400 font-medium uppercase tracking-wider">Defect Rate</p>
                    <h3 class="text-2xl font-bold text-white">1.2%</h3>
                </div>
            </div>
        </div>

        <!-- Units Produced -->
        <div
            class="bg-gray-700 border border-gray-600 rounded-xl p-5 shadow-lg relative overflow-hidden group hover:border-preh-green transition-colors">
            <div class="flex items-center space-x-4">
                <div class="p-3 bg-green-500/10 rounded-full text-preh-green">
                    <i data-lucide="check-circle" class="w-6 h-6"></i>
                </div>
                <div>
                    <p class="text-xs text-gray-400 font-medium uppercase tracking-wider">Units Produced</p>
                    <h3 class="text-2xl font-bold text-white">12,450</h3>
                </div>
            </div>
        </div>

        <!-- Uptime -->
        <div
            class="bg-gray-700 border border-gray-600 rounded-xl p-5 shadow-lg relative overflow-hidden group hover:border-yellow-500 transition-colors">
            <div class="flex items-center space-x-4">
                <div class="p-3 bg-yellow-500/10 rounded-full text-yellow-500">
                    <i data-lucide="clock" class="w-6 h-6"></i>
                </div>
                <div>
                    <p class="text-xs text-gray-400 font-medium uppercase tracking-wider">Uptime</p>
                    <h3 class="text-2xl font-bold text-white">98.2%</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Row -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Production Output Trend (Area Chart) -->
        <div class="lg:col-span-2 bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-lg flex flex-col h-96">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-base font-bold text-white">Production Output Trend</h3>
                <select
                    class="bg-gray-800 border-none text-xs text-gray-300 rounded px-2 py-1 focus:ring-1 focus:ring-preh-petrol">
                    <option>Last 7 Days</option>
                    <option>Last 30 Days</option>
                </select>
            </div>
            <div id="productionChart" class="flex-1 w-full min-h-0"></div>
        </div>

        <!-- Defects by Day (Bar Chart) -->
        <div class="bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-lg flex flex-col h-96">
            <h3 class="text-base font-bold text-white mb-4">Defects by Day</h3>
            <div id="defectsChart" class="flex-1 w-full min-h-0"></div>
        </div>
    </div>

    <!-- High Priority Tasks -->
    <div class="bg-gray-700 border border-gray-600 rounded-xl p-6 shadow-lg">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-base font-bold text-white flex items-center gap-2">
                <i data-lucide="alert-circle" class="w-5 h-5 text-yellow-500"></i>
                High Priority Tasks
            </h3>
            <span class="text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded-full">Drag and drop to reorder priority (6
                pending)</span>
        </div>

        <div class="space-y-3">
            <!-- Task 1 -->
            <div
                class="bg-gray-700/50 border border-gray-700 hover:border-preh-petrol rounded-lg p-4 flex justify-between items-center transition-colors cursor-move group">
                <div class="flex items-start gap-3">
                    <div class="w-1 h-10 bg-red-500 rounded-full"></div>
                    <div>
                        <h4 class="text-sm font-semibold text-white group-hover:text-preh-light-blue transition-colors">
                            Review Production Schedule w/ Plant Manager</h4>
                        <p class="text-xs text-gray-400 mt-1 flex items-center gap-1">
                            <i data-lucide="message-square" class="w-3 h-3"></i> MS Teams • Due: 2024-04-02
                        </p>
                    </div>
                </div>
                <span class="text-[10px] font-bold bg-red-500/20 text-red-500 px-2 py-1 rounded">High</span>
            </div>

            <!-- Task 2 -->
            <div
                class="bg-gray-700/50 border border-gray-700 hover:border-preh-petrol rounded-lg p-4 flex justify-between items-center transition-colors cursor-move group">
                <div class="flex items-start gap-3">
                    <div class="w-1 h-10 bg-yellow-500 rounded-full"></div>
                    <div>
                        <h4 class="text-sm font-semibold text-white group-hover:text-preh-light-blue transition-colors">
                            Update Safety Compliance Docs</h4>
                        <p class="text-xs text-gray-400 mt-1 flex items-center gap-1">
                            <i data-lucide="file-text" class="w-3 h-3"></i> Internal Sharepoint • Due: 2024-04-05
                        </p>
                    </div>
                </div>
                <span class="text-[10px] font-bold bg-yellow-500/20 text-yellow-500 px-2 py-1 rounded">Medium</span>
            </div>

            <!-- Task 3 -->
            <div
                class="bg-gray-700/50 border border-gray-700 hover:border-preh-petrol rounded-lg p-4 flex justify-between items-center transition-colors cursor-move group">
                <div class="flex items-start gap-3">
                    <div class="w-1 h-10 bg-red-500 rounded-full"></div>
                    <div>
                        <h4 class="text-sm font-semibold text-white group-hover:text-preh-light-blue transition-colors">
                            Review PFMEA for SMT Line</h4>
                        <p class="text-xs text-gray-400 mt-1 flex items-center gap-1">
                            <i data-lucide="file-warning" class="w-3 h-3"></i> Internal • Due: 2024-03-25
                        </p>
                    </div>
                </div>
                <span class="text-[10px] font-bold bg-red-500/20 text-red-500 px-2 py-1 rounded">High</span>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Production Output Chart (Area)
        var prodOptions = {
            chart: {
                type: 'area',
                height: '100%',
                toolbar: { show: false },
                background: 'transparent'
            },
            series: [{
                name: 'Output',
                data: [4000, 3000, 2000, 2780, 1890, 2390, 3490]
            }],
            xaxis: {
                categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                labels: { style: { colors: '#9ca3af' } },
                axisBorder: { show: false },
                axisTicks: { show: false }
            },
            yaxis: {
                labels: { style: { colors: '#9ca3af' } }
            },
            grid: {
                borderColor: '#374151',
                strokeDashArray: 4,
            },
            colors: ['#0ea5e9'],
            fill: {
                type: 'gradient',
                gradient: {
                    shadeIntensity: 1,
                    opacityFrom: 0.7,
                    opacityTo: 0.1,
                    stops: [0, 90, 100]
                }
            },
            dataLabels: { enabled: false },
            stroke: { curve: 'smooth', width: 2 },
            theme: { mode: 'dark' }
        };
        var prodChart = new ApexCharts(document.querySelector("#productionChart"), prodOptions);
        prodChart.render();

        // Defects Chart (Bar)
        var defectOptions = {
            chart: {
                type: 'bar',
                height: '100%',
                toolbar: { show: false },
                background: 'transparent'
            },
            series: [{
                name: 'Defects',
                data: [24, 13, 98, 39, 48, 38, 43]
            }],
            xaxis: {
                categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                labels: { style: { colors: '#9ca3af' } },
                axisBorder: { show: false },
                axisTicks: { show: false }
            },
            yaxis: {
                labels: { style: { colors: '#9ca3af' } }
            },
            grid: {
                borderColor: '#374151',
                strokeDashArray: 4,
            },
            plotOptions: {
                bar: {
                    borderRadius: 4,
                    columnWidth: '40%',
                }
            },
            colors: ['#ef4444'],
            dataLabels: { enabled: false },
            theme: { mode: 'dark' }
        };
        var defectChart = new ApexCharts(document.querySelector("#defectsChart"), defectOptions);
        defectChart.render();
    });
</script>
{% endblock %}